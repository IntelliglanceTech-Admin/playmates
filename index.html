<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // âœ… Extract Query Parameters (Use window.location.search instead of hash)
            const urlParams = new URLSearchParams(window.location.search);
            const screen = urlParams.get("screen"); // e.g., "playmate-home"
            const sessionId = urlParams.get("session_id");

            let deepLink = "";

            // âœ… Handle Different Screens
            if (screen === "playmate-registration") {
                deepLink = sessionId
                    ? `playmates://playmate/playmate-registration?session_id=${sessionId}&status=SUCCESS`
                    : `playmates://playmate/playmate-registration?status=CANCELED`;
            } else if (screen === "playmate-home") {
                deepLink = sessionId
                    ? `playmates://playmate/playmate-home?session_id=${sessionId}&status=SUCCESS`
                    : `playmates://playmate/playmate-home?status=CANCELED`;
            } else {
                document.body.innerHTML = `
                    <h2>Error: Invalid Deep Link</h2>
                    <p>Could not determine where to navigate.</p>
                `;
                return;
            }

            console.log("ðŸ”¹ Redirecting to:", deepLink);

            // âœ… Attempt to Open App Deep Link
            window.location.href = deepLink;

            // âœ… Provide a Fallback for Desktop Users
            setTimeout(() => {
                document.body.innerHTML = `
                    <h2>Redirecting...</h2>
                    <p>If the app does not open, <a href="${deepLink}">click here</a>.</p>
                `;
            }, 2000);
        });
    </script>
</head>
<body>
    <h2>Redirecting to app...</h2>
</body>
</html>
